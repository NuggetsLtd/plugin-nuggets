import type {
  Content,
  HandlerCallback,
  IAgentRuntime,
  Memory,
  Route,
} from "@elizaos/core";
import express from "express";
import {
  callback,
  OIDCCallbackResponse,
  OIDCQueryResponse,
} from "../../providers/oidc";
import { Notification } from "../../types.js";

export default {
  path: "/oidc/callback",
  type: "GET",
  handler: async (
    req: express.Request,
    res: express.Response,
    runtime: IAgentRuntime,
  ) => {
    const outcome = await callback(runtime, req.query as OIDCQueryResponse);
    let notification: Notification;

    switch (outcome.type) {
      case "Auth":
        notification = handleAuthCallback(outcome, res);
        break;
      case "Twitter":
        notification = handleTwitterCallback(outcome, res);
        break;
      case "Person":
        notification = handlePersonCallback(outcome, res);
        break;
      default:
        console.log("Unknown OIDC callback type");
        res.sendStatus(400);
        notification = {
          status: "FAILED",
          outcome: {
            verified: false,
            error: "Unknown OIDC callback type",
          },
        } as Notification;
    }
  },
} as Route;

const handleAuthCallback = (
  outcome: OIDCCallbackResponse,
  res: express.Response,
) => {
  const htmlBody = `<div><h2 class="social__title">User Authenticated</h2></div>`;

  res.setHeader("Content-Type", "text/html");
  res.send(`${htmlHeader}${htmlBody}${htmlFooter}`);

  return {
    ref: outcome.ref,
    status: "COMPLETED",
    outcome: {
      verified: true,
    },
  } as Notification;
};

const handleTwitterCallback = (
  outcome: OIDCCallbackResponse,
  res: express.Response,
) => {
  const htmlBody = `<a href="${outcome.url}" target="_blank" rel="noopener noreferrer" class="social__link">
    <img src="${outcome.profileImage}" alt="Twitter Profile Image" class="social__profileImage" />
    <h2 class="social__title">${outcome.username}</h2>
  </a>`;

  res.setHeader("Content-Type", "text/html");
  res.send(`${htmlHeader}${htmlBody}${htmlFooter}`);

  return {
    ref: outcome.ref,
    status: "COMPLETED",
    outcome: {
      verified: true,
      proof: {
        type: outcome.type,
        url: outcome.url,
        username: outcome.username,
        profileImage: outcome.profileImage,
      },
    },
  } as Notification;
};

const handlePersonCallback = (
  outcome: OIDCCallbackResponse,
  res: express.Response,
) => {
  const htmlBody = `<div class="person">
    <ul class="person__details">
      ${outcome.givenName ? `<li><strong>Name</strong>: ${outcome.givenName} ${outcome.familyName}</li>` : ""}
      ${outcome.over18 ? `<li><strong>Over 18</strong>: ${outcome.over18 ? "Yes" : "No"}</li>` : ""}
    </ul>
  </div>`;

  res.setHeader("Content-Type", "text/html");
  res.send(`${htmlHeader}${htmlBody}${htmlFooter}`);

  return {
    ref: outcome.ref,
    status: "COMPLETED",
    outcome: {
      verified: true,
      proof: {
        type: outcome.type,
        givenName: outcome.givenName,
        familyName: outcome.familyName,
      },
    },
  } as Notification;
};

const htmlHeader = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat</title>
  <style>
    html,
    body {
      height: 100%;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 0;
      height: 100%;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f2f2f2;
    }

    .callback {
      width: auto;
      max-width: 600px;
      width: 100%;
    }

    .callback__container {
      background-color: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0px 4px 24px #d8d8d8;
    }

    .callback__title {
      margin-top: 0;
    }

    .nuggets__logo {
      width: 150px;
      margin: 20px auto 0;
    }

    .callback__closeWindow {
      background-color: blue;
      color: aliceblue;
      border: none;
      border-radius: 5px;
      padding: 10px;
      cursor: pointer;
      right: 0;
      top: 0;
      font-size: 16px;
      text-decoration: none;
      line-height: 1em;
      margin-top: 15px;
      display: inline-block;
    }

    .social__link,
    .person {
      display: flex;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #d8d8d8;
    }

    .social__link:hover {
      background-color: #f2f2f2;
    }

    .social__profileImage {
      height: 50px;
      width: auto;
      border-radius: 50%;
    }

    .social__title,
    .social__profileImage {
      display: inline-block;
      line-height: 50px;
    }

    .social__title {
      margin: 0 0 0 10px;
      font-size: 20px;
    }

    .person__details {
      list-style: none;
      padding: 0;
    }
  </style>
</head>
<body>
  <section class="callback">
    <div class="callback__container">
      <h1 class="callback__title">Verification Complete</h1>`;
const htmlFooter = `
      <a href="#" onclick="window.close();return false;" class="callback__closeWindow">Close window</a>
    </div>
    <footer class="nuggets__logo">
      <svg viewBox="0 0 341 151" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <title>Assets/Logos/Poweredby/Colour@2x</title>
        <defs>
          <filter x="-3.1%" y="-3.5%" width="112.3%" height="113.9%" filterUnits="objectBoundingBox" id="filter-1">
            <feOffset dx="1" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="0.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"
              result="shadowMatrixOuter1"></feColorMatrix>
            <feMerge>
              <feMergeNode in="shadowMatrixOuter1"></feMergeNode>
              <feMergeNode in="SourceGraphic"></feMergeNode>
            </feMerge>
          </filter>
        </defs>
        <g id="Assets/Logos/Poweredby/Colour" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="Nuggets-Logotype-and-Icon-White-Outline-Grey-Outline-Horizontal-Powered-By"
            transform="translate(0.5848, 0.5727)">
            <g id="Nuggets-Powered-by-Lockup" transform="translate(30.4152, 30.4273)">
              <path
                d="M95,0 C99.418278,-8.11624501e-16 103,3.581722 103,8 L103.000229,29.5437309 C106.146949,29.7546632 108.792289,31.7961559 109.880461,34.6124203 L109.889285,34.6358072 L109.898248,34.6124203 C111.033173,31.6751573 113.861945,29.5806711 117.186762,29.5267642 L117.318259,29.5256989 L122.400847,29.5256989 C125.209552,29.5256989 127.678143,30.9819037 129.092819,33.1805132 C132.56577,30.9361695 136.684741,29.608284 141.109418,29.5364405 L141.488319,29.5333665 L141.847824,29.5361428 C148.393527,29.6373015 154.298141,32.4962008 158.420799,37.0260791 C162.530006,32.5096495 168.417412,29.6429416 174.976779,29.5364405 L175.355689,29.5333665 L175.715185,29.5361428 C182.400219,29.6394584 188.416729,32.6193295 192.549195,37.3179744 C196.743773,32.5969788 202.857272,29.6224578 209.666454,29.6224578 C213.929697,29.6224578 217.920282,30.7885458 221.338023,32.819286 L221.337488,31.972172 C221.337488,27.6244268 224.826787,24.0916509 229.157798,24.0214301 L229.289296,24.0203648 L234.595212,24.0203648 C238.372041,24.0203648 241.533881,26.6534483 242.34517,30.1840546 L242.361446,30.2584257 L242.376266,30.2589057 C244.333921,30.3541661 246.105677,31.1573648 247.440985,32.4179547 C250.715188,30.293692 254.778122,29.1911294 259.319051,29.1911294 C264.301433,29.1911294 268.81935,30.5274442 272.367675,33.2373039 C276.203465,36.1666997 278.553203,40.4476624 279.091465,45.401322 C279.290807,47.2358732 278.851956,48.9795958 277.961705,50.4243008 L277.908675,50.508498 L277.929675,50.5466779 C279.104536,52.7282405 279.733839,55.2654986 279.759036,58.0888231 L279.759823,58.2656527 C279.759823,63.5723909 277.435579,68.2841576 273.346669,71.4770933 C269.723974,74.3059711 265.007572,75.7310504 259.884172,75.7310504 C255.8595,75.7310504 252.142876,74.8384784 248.988094,73.192464 C247.554476,74.8714065 245.432391,75.9461835 243.058928,75.9808041 L242.927277,75.9816554 L239.389219,75.9758279 C234.26664,75.9758279 229.618158,74.1269645 226.267379,70.5498192 C225.911027,70.1694708 225.574146,69.7747104 225.256684,69.3664467 C221.125997,73.2083185 215.611549,75.4972098 209.666454,75.4972098 C205.253785,75.4972098 201.133277,74.2480156 197.637744,72.0838472 C195.234522,82.1738552 186.172898,89.6810339 175.355689,89.6810339 C168.726983,89.6810339 162.650079,86.8369515 158.420096,82.1913251 C154.23214,86.7927246 148.197951,89.6810339 141.488319,89.6810339 C131.434784,89.6810339 122.650545,83.13885 119.654349,73.6916801 C119.604592,73.5347933 119.559942,73.3778055 119.520287,73.2208699 C116.617806,74.7167754 113.285909,75.552634 109.723508,75.552634 C105.921324,75.552634 102.423421,74.5995574 99.4433285,72.9080128 C98.0119011,74.60726 95.8808384,75.6974385 93.4941708,75.7361346 L93.3626732,75.7372 L88.3360153,75.7372 C84.7708642,75.7372 81.7536985,73.3909957 80.7443123,70.1583812 L80.7128675,70.0551004 C79.7449534,73.3033191 76.7648594,75.6786813 73.2213048,75.7361346 L73.0898072,75.7372 L68.0635377,75.7372 C63.7157925,75.7372 60.1830166,72.2479015 60.1127958,67.9168904 L60.1117305,67.7853927 L60.111,62.434 L47.091,62.434 L42.7397137,70.9742028 C41.2142774,73.967365 38.1821578,75.8847808 34.8377939,75.9949807 L34.5329339,76 L16.4491049,76 C12.9817116,76 9.80821937,74.054383 8.23814653,70.9659935 L0.998212657,56.7247842 C0.291040719,55.3337517 -0.0404653307,53.8077578 0.00393298519,52.2900828 C0.00173352937,52.193998 5.95187168e-18,52.0972014 0,52 L-8.8817842e-16,8 C-1.42926142e-15,3.581722 3.581722,5.41083001e-16 8,0 L95,0 Z"
                id="Combined-Shape" stroke="#979797" stroke-width="0.5" fill="#FFFFFF"></path>
              <g id="Nugget-Vector-Group-with-Shadow" filter="url(#filter-1)" transform="translate(9, 38)">
                <polygon id="Fill-1" fill="#8168A0"
                  points="16.2853379 24.8914811 32.5707649 14.3583899 16.2853379 3.82521052"></polygon>
                <polygon id="Fill-2" fill="#CAC8E9"
                  points="7.23119112 0 4.46146751e-05 14.358337 16.2853825 3.82524584">
                </polygon>
                <polygon id="Fill-3" fill="#CAA3C7" points="25.3394846 0 16.2852932 3.82524584 32.5707203 14.358337">
                </polygon>
                <polygon id="Fill-4" fill="#E4D8EB" points="7.23119112 0 16.2853825 3.82524584 25.3394846 0"></polygon>
                <polygon id="Fill-5" fill="#793773"
                  points="7.23119112 28.7167092 25.3394846 28.7167092 16.2853825 24.8914634"></polygon>
                <polygon id="Fill-6" fill="#7D4476"
                  points="16.2853379 24.8914811 25.3395292 28.7167269 32.5707649 14.3583899"></polygon>
                <polygon id="Fill-7" fill="#88739F"
                  points="7.23119112 28.7167092 16.2853825 24.8914634 4.46146751e-05 14.3583723"></polygon>
                <polygon id="Fill-8" fill="#9B90C1" points="0 14.3583546 16.2853379 24.8914457 16.2853379 3.8252635">
                </polygon>
              </g>
              <g id="Nuggets-Logotype" transform="translate(68.0635, 31.9722)" fill="#8764A0">
                <path
                  d="M12.6777266,5.63307459 C5.44224459,5.63307459 0,10.6975445 0,17.9486261 L0,35.8132207 L5.02626942,35.8132207 L5.02626942,17.778539 C5.02626942,13.3578313 8.33348557,10.3873399 12.6777266,10.3873399 C16.988177,10.3873399 20.2724776,13.3578313 20.2724776,17.778539 L20.2724776,35.8132207 L25.2991354,35.8132207 L25.2991354,17.9486261 C25.2991354,10.6975445 19.8801948,5.63307459 12.6777266,5.63307459"
                  id="Fill-1"></path>
                <path
                  d="M49.2547216,23.3131032 C49.2547216,27.733811 45.9700326,30.7043024 41.6599706,30.7043024 C37.3157295,30.7043024 34.3969122,27.733811 34.3969122,23.3131032 L34.3969122,5.50533412 L29.3706428,5.50533412 L29.3706428,23.3131032 C29.3706428,30.4489771 34.5390662,35.6286548 41.6599706,35.6286548 C48.780875,35.6286548 54.3373088,30.4489771 54.3373088,23.3131032 L54.3373088,5.50533412 L49.2547216,5.50533412 L49.2547216,23.3131032 Z"
                  id="Fill-3"></path>
                <path
                  d="M166.531674,25.0269351 L166.531674,11.3767642 L173.919797,11.3767642 L173.919797,6.22900218 L166.531674,6.22900218 L166.531674,0 L161.225758,0 L161.225758,25.0269351 C161.225758,28.3928693 162.187045,31.1987226 164.006694,33.1409071 C165.790609,35.0453378 168.321028,36.0518486 171.325681,36.0518486 L174.876812,36.0576869 L174.876812,30.9990552 L172.221329,30.9998336 C168.446092,30.9998336 166.531674,28.9903148 166.531674,25.0269351"
                  id="Fill-5"></path>
                <path
                  d="M184.644188,13.665 C184.644188,11.400156 187.413084,9.58796943 191.255514,9.58796943 C194.815577,9.58796943 197.584861,11.1736327 198.262617,14.2881338 L203.122652,14.2881338 C202.501214,8.56900369 197.980251,5.17076462 191.255514,5.17076462 C183.457242,5.17076462 179.84086,9.64440565 179.84086,13.8350871 C179.84086,19.3280831 184.135386,21.0273973 191.199196,22.046363 C198.319323,23.0088925 199.110492,24.5381196 199.110492,26.5764403 C199.110492,29.1246331 196.341596,31.3334301 191.820634,31.3334301 C187.639132,31.3334301 184.305116,29.2378947 183.68329,25.8404341 L178.824032,25.8404341 C179.6152,32.013 184.757212,35.8070711 191.820634,35.8070711 C198.77142,35.8070711 203.744478,32.1262617 203.744478,26.2934807 C203.744478,19.6678681 198.432347,18.4219898 191.990364,17.4030241 C186.283232,16.4969308 184.644188,15.7605354 184.644188,13.665 Z"
                  id="Fill-8"></path>
                <path
                  d="M107.292151,30.3239223 C101.877094,30.3239223 97.4874104,25.9250106 97.4874104,20.4985704 C97.4874104,15.0721302 101.877094,10.6736078 107.292151,10.6736078 C112.320751,10.6736078 116.462636,14.4684572 117.028145,19.355445 L117.027756,19.355445 L117.037855,21.5673557 C116.506137,26.4905404 112.346385,30.3239223 107.292151,30.3239223 M107.292151,5.51300166 C99.0328494,5.51300166 92.3380186,12.2222956 92.3380186,20.4985704 C92.3380186,28.7752344 99.0328494,35.4845284 107.292151,35.4845284 C111.038258,35.4845284 114.459275,34.1008678 117.083297,31.820066 L117.096503,34.7714859 C117.096503,40.1975368 112.706819,44.5964485 107.292151,44.5964485 C103.500601,44.5964485 100.21164,42.4398063 98.5803648,39.2840484 L93.0375249,39.3155749 C94.9581572,45.3702086 100.614021,49.7570546 107.292151,49.7570546 C115.551064,49.7570546 122.246283,43.0473715 122.246283,34.7714859 L122.246283,19.355445 L122.19851,19.355445 C121.615135,11.613952 115.166549,5.51300166 107.292151,5.51300166"
                  id="Fill-11"></path>
                <path
                  d="M73.4247816,30.3239223 C68.0101133,30.3239223 63.6204296,25.9250106 63.6204296,20.4985704 C63.6204296,15.0721302 68.0101133,10.6736078 73.4247816,10.6736078 C78.4533814,10.6736078 82.595655,14.4684572 83.1607753,19.355445 L83.1603869,19.355445 L83.1704853,21.5673557 C82.6387673,26.4905404 78.4790157,30.3239223 73.4247816,30.3239223 M73.4247816,5.51300166 C65.1658686,5.51300166 58.4706493,12.2222956 58.4706493,20.4985704 C58.4706493,28.7752344 65.1658686,35.4845284 73.4247816,35.4845284 C77.1708884,35.4845284 80.5922938,34.1008678 83.215928,31.820066 L83.2291335,34.7714859 C83.2291335,40.1975368 78.8394498,44.5964485 73.4247816,44.5964485 C69.6332321,44.5964485 66.344659,42.4398063 64.7133839,39.2840484 L59.170544,39.3155749 C61.0907879,45.3702086 66.7466519,49.7570546 73.4247816,49.7570546 C81.6836945,49.7570546 88.3789138,43.0473715 88.3789138,34.7714859 L88.3789138,19.355445 L88.3311407,19.355445 C87.7477657,11.613952 81.2995681,5.51300166 73.4247816,5.51300166"
                  id="Fill-13"></path>
                <path
                  d="M132.324845,17.5124714 C133.612775,13.5926838 137.296738,10.7626991 141.639426,10.7626991 C145.958809,10.7626991 149.645879,13.6140907 150.952842,17.5004058 L132.324845,17.5124714 Z M141.602916,5.60209305 C133.344003,5.60209305 126.648784,12.311387 126.648784,20.5876618 C126.648784,28.8639366 133.344003,35.5732305 141.602916,35.5732305 C147.990912,35.5732305 153.443643,31.559642 155.586051,25.9109599 L149.88358,25.9078462 C148.138115,28.6183417 145.098117,30.4130136 141.639426,30.4130136 C136.593736,30.4130136 132.438257,26.5932544 131.895276,21.6821353 L156.518597,21.6692912 C156.543843,21.3119915 156.557048,20.9511889 156.557048,20.5876618 C156.557048,12.311387 149.861441,5.60209305 141.602916,5.60209305 L141.602916,5.60209305 Z"
                  id="Fill-15"></path>
              </g>
              <path
                d="M11.7157736,21 L11.7157736,16.4161509 L15.1379623,16.4161509 C16.2682264,16.4266164 17.1237736,16.1388176 17.7046038,15.5527547 C18.285434,14.9666918 18.5758491,14.1503899 18.5758491,13.1038491 C18.5758491,12.0573082 18.285434,11.2436226 17.7046038,10.6627925 C17.1237736,10.0819623 16.2682264,9.79154717 15.1379623,9.79154717 L10.2244528,9.79154717 L10.2244528,21 L11.7157736,21 Z M14.6356226,15.1603019 L11.7157736,15.1603019 L11.7157736,11.0473962 L14.6356226,11.0473962 C15.4833208,11.0473962 16.1033962,11.2226918 16.4958491,11.573283 C16.8883019,11.9238742 17.0845283,12.4340629 17.0845283,13.1038491 C17.0845283,13.7736352 16.8883019,14.2864403 16.4958491,14.6422642 C16.1033962,14.9980881 15.4833208,15.1707673 14.6356226,15.1603019 Z M23.6777358,21.1726792 C24.3265912,21.1726792 24.8943396,21.0654088 25.3809811,20.8508679 C25.8676226,20.636327 26.2783899,20.3380629 26.613283,19.9560755 C26.9481761,19.5740881 27.1993459,19.1266918 27.3667925,18.6138868 C27.534239,18.1010818 27.6179623,17.5464151 27.6179623,16.9498868 C27.6179623,16.3533585 27.534239,15.7960755 27.3667925,15.2780377 C27.1993459,14.76 26.9481761,14.3099874 26.613283,13.928 C26.2783899,13.5460126 25.8676226,13.2451321 25.3809811,13.0253585 C24.8943396,12.8055849 24.3265912,12.6956981 23.6777358,12.6956981 C23.0393459,12.6956981 22.4742138,12.8055849 21.9823396,13.0253585 C21.4904654,13.2451321 21.0770818,13.5460126 20.7421887,13.928 C20.4072956,14.3099874 20.1561258,14.76 19.9886792,15.2780377 C19.8212327,15.7960755 19.7375094,16.3533585 19.7375094,16.9498868 C19.7375094,17.5464151 19.8212327,18.1010818 19.9886792,18.6138868 C20.1561258,19.1266918 20.4072956,19.5740881 20.7421887,19.9560755 C21.0770818,20.3380629 21.4904654,20.636327 21.9823396,20.8508679 C22.4742138,21.0654088 23.0393459,21.1726792 23.6777358,21.1726792 Z M23.6777358,20.0110189 C23.3323774,20.0110189 23.0053333,19.9429937 22.6966038,19.8069434 C22.3878742,19.6708931 22.1183899,19.4746667 21.8881509,19.2182642 C21.6579119,18.9618616 21.4773836,18.6426667 21.346566,18.2606792 C21.2157484,17.8786918 21.1503396,17.441761 21.1503396,16.9498868 C21.1503396,16.4580126 21.2157484,16.0210818 21.346566,15.6390943 C21.4773836,15.2571069 21.6579119,14.9352956 21.8881509,14.6736604 C22.1183899,14.4120252 22.3878742,14.2131824 22.6966038,14.0771321 C23.0053333,13.9410818 23.3323774,13.8730566 23.6777358,13.8730566 C24.0230943,13.8730566 24.3501384,13.9410818 24.6588679,14.0771321 C24.9675975,14.2131824 25.2370818,14.4120252 25.4673208,14.6736604 C25.6975597,14.9352956 25.8780881,15.2571069 26.0089057,15.6390943 C26.1397233,16.0210818 26.2051321,16.4580126 26.2051321,16.9498868 C26.2051321,17.441761 26.1397233,17.8786918 26.0089057,18.2606792 C25.8780881,18.6426667 25.6975597,18.9618616 25.4673208,19.2182642 C25.2370818,19.4746667 24.9675975,19.6708931 24.6588679,19.8069434 C24.3501384,19.9429937 24.0230943,20.0110189 23.6777358,20.0110189 Z M32.5000755,21 L34.1326792,14.5480755 L34.1640755,14.5480755 L35.8123774,21 L37.2252075,21 L39.8153962,12.8840755 L38.4339623,12.8840755 L36.6129811,19.5243774 L36.5815849,19.5243774 L34.8861887,12.8840755 L33.4262642,12.8840755 L31.7936604,19.5243774 L31.7622642,19.5243774 L29.9255849,12.8840755 L28.4499623,12.8840755 L31.0558491,21 L32.5000755,21 Z M44.5405283,21.1726792 C45.4614843,21.1726792 46.2254591,20.9424403 46.8324528,20.4819623 C47.4394465,20.0214843 47.8318994,19.336 48.0098113,18.4255094 L46.6911698,18.4255094 C46.5760503,18.9592453 46.3379623,19.3569308 45.9769057,19.618566 C45.6158491,19.8802013 45.1527547,20.0110189 44.5876226,20.0110189 C44.1480755,20.0110189 43.7660881,19.937761 43.4416604,19.7912453 C43.1172327,19.6447296 42.8503648,19.4485031 42.6410566,19.202566 C42.4317484,18.9566289 42.28,18.6740629 42.1858113,18.3548679 C42.0916226,18.035673 42.049761,17.6981635 42.0602264,17.3423396 L48.1353962,17.3423396 C48.156327,16.8504654 48.1118491,16.3324277 48.0019623,15.7882264 C47.8920755,15.2440252 47.6932327,14.7416855 47.405434,14.2812075 C47.1176352,13.8207296 46.7356478,13.4413585 46.2594717,13.1430943 C45.7832956,12.8448302 45.1841509,12.6956981 44.4620377,12.6956981 C43.9073711,12.6956981 43.3971824,12.8003522 42.9314717,13.0096604 C42.465761,13.2189686 42.0628428,13.512 41.722717,13.8887547 C41.3825912,14.2655094 41.1183396,14.7102893 40.9299623,15.2230943 C40.7415849,15.7358994 40.6473962,16.3010314 40.6473962,16.9184906 C40.668327,17.5359497 40.7598994,18.1063145 40.9221132,18.6295849 C41.084327,19.1528553 41.3276478,19.6028679 41.6520755,19.9796226 C41.9765031,20.3563774 42.376805,20.6494088 42.8529811,20.858717 C43.3291572,21.0680252 43.891673,21.1726792 44.5405283,21.1726792 Z M46.722566,16.1649811 L42.0602264,16.1649811 C42.0811572,15.8510189 42.1491824,15.5553711 42.2643019,15.2780377 C42.3794214,15.0007044 42.5364025,14.7573836 42.7352453,14.5480755 C42.9340881,14.3387673 43.1721761,14.1739371 43.4495094,14.0535849 C43.7268428,13.9332327 44.0381887,13.8730566 44.3835472,13.8730566 C44.7184403,13.8730566 45.0245535,13.9332327 45.3018868,14.0535849 C45.5792201,14.1739371 45.8199245,14.3361509 46.024,14.5402264 C46.2280755,14.7443019 46.3902893,14.9876226 46.5106415,15.2701887 C46.6309937,15.5527547 46.7016352,15.8510189 46.722566,16.1649811 Z M50.8040755,21 L50.8040755,17.389434 C50.8040755,16.8661635 50.8564025,16.4030692 50.9610566,16.0001509 C51.0657107,15.5972327 51.2331572,15.2544906 51.4633962,14.9719245 C51.6936352,14.6893585 51.9971321,14.4748176 52.3738868,14.3283019 C52.7506415,14.1817862 53.2058868,14.1085283 53.7396226,14.1085283 L53.7396226,12.6956981 C53.0175094,12.6747673 52.4209811,12.821283 51.9500377,13.1352453 C51.4790943,13.4492075 51.0814088,13.9358491 50.7569811,14.5951698 L50.7255849,14.5951698 L50.7255849,12.8840755 L49.4697358,12.8840755 L49.4697358,21 L50.8040755,21 Z M58.1978868,21.1726792 C59.1188428,21.1726792 59.8828176,20.9424403 60.4898113,20.4819623 C61.096805,20.0214843 61.4892579,19.336 61.6671698,18.4255094 L60.3485283,18.4255094 C60.2334088,18.9592453 59.9953208,19.3569308 59.6342642,19.618566 C59.2732075,19.8802013 58.8101132,20.0110189 58.2449811,20.0110189 C57.805434,20.0110189 57.4234465,19.937761 57.0990189,19.7912453 C56.7745912,19.6447296 56.5077233,19.4485031 56.2984151,19.202566 C56.0891069,18.9566289 55.9373585,18.6740629 55.8431698,18.3548679 C55.7489811,18.035673 55.7071195,17.6981635 55.7175849,17.3423396 L61.7927547,17.3423396 C61.8136855,16.8504654 61.7692075,16.3324277 61.6593208,15.7882264 C61.549434,15.2440252 61.3505912,14.7416855 61.0627925,14.2812075 C60.7749937,13.8207296 60.3930063,13.4413585 59.9168302,13.1430943 C59.4406541,12.8448302 58.8415094,12.6956981 58.1193962,12.6956981 C57.5647296,12.6956981 57.0545409,12.8003522 56.5888302,13.0096604 C56.1231195,13.2189686 55.7202013,13.512 55.3800755,13.8887547 C55.0399497,14.2655094 54.7756981,14.7102893 54.5873208,15.2230943 C54.3989434,15.7358994 54.3047547,16.3010314 54.3047547,16.9184906 C54.3256855,17.5359497 54.4172579,18.1063145 54.5794717,18.6295849 C54.7416855,19.1528553 54.9850063,19.6028679 55.309434,19.9796226 C55.6338616,20.3563774 56.0341635,20.6494088 56.5103396,20.858717 C56.9865157,21.0680252 57.5490314,21.1726792 58.1978868,21.1726792 Z M60.3799245,16.1649811 L55.7175849,16.1649811 C55.7385157,15.8510189 55.8065409,15.5553711 55.9216604,15.2780377 C56.0367799,15.0007044 56.193761,14.7573836 56.3926038,14.5480755 C56.5914465,14.3387673 56.8295346,14.1739371 57.1068679,14.0535849 C57.3842013,13.9332327 57.6955472,13.8730566 58.0409057,13.8730566 C58.3757987,13.8730566 58.6819119,13.9332327 58.9592453,14.0535849 C59.2365786,14.1739371 59.477283,14.3361509 59.6813585,14.5402264 C59.885434,14.7443019 60.0476478,14.9876226 60.168,15.2701887 C60.2883522,15.5527547 60.3589937,15.8510189 60.3799245,16.1649811 Z M66.4707925,21.1726792 C67.0359245,21.1726792 67.5539623,21.0732579 68.0249057,20.8744151 C68.4958491,20.6755723 68.8412075,20.3511447 69.0609811,19.9011321 L69.0923774,19.9011321 L69.0923774,21 L70.426717,21 L70.426717,9.79154717 L69.0923774,9.79154717 L69.0923774,13.9672453 L69.0609811,13.9672453 C68.9144654,13.7265409 68.7339371,13.5250818 68.5193962,13.3628679 C68.3048553,13.2006541 68.0772327,13.0698365 67.8365283,12.9704151 C67.5958239,12.8709937 67.3551195,12.8003522 67.1144151,12.7584906 C66.8737107,12.7166289 66.6487044,12.6956981 66.4393962,12.6956981 C65.8219371,12.6956981 65.2803522,12.8082013 64.8146415,13.0332075 C64.3489308,13.2582138 63.9617107,13.5617107 63.6529811,13.9436981 C63.3442516,14.3256855 63.1140126,14.7730818 62.9622642,15.2858868 C62.8105157,15.7986918 62.7346415,16.3428931 62.7346415,16.9184906 C62.7346415,17.4940881 62.8131321,18.0382893 62.9701132,18.5510943 C63.1270943,19.0638994 63.3599497,19.5139119 63.6686792,19.9011321 C63.9774088,20.2883522 64.3646289,20.5970818 64.8303396,20.8273208 C65.2960503,21.0575597 65.8428679,21.1726792 66.4707925,21.1726792 Z M66.6591698,20.0110189 C66.2300881,20.0110189 65.8559497,19.9272956 65.5367547,19.7598491 C65.2175597,19.5924025 64.9559245,19.3673962 64.7518491,19.0848302 C64.5477736,18.8022642 64.3960252,18.4804528 64.2966038,18.1193962 C64.1971824,17.7583396 64.1474717,17.389434 64.1474717,17.0126792 C64.1474717,16.6149937 64.1893333,16.2277736 64.2730566,15.8510189 C64.3567799,15.4742642 64.4928302,15.1393711 64.6812075,14.8463396 C64.8695849,14.5533082 65.1207547,14.3178365 65.434717,14.1399245 C65.7486792,13.9620126 66.1306667,13.8730566 66.5806792,13.8730566 C67.0411572,13.8730566 67.4336101,13.9593962 67.7580377,14.1320755 C68.0824654,14.3047547 68.346717,14.5323774 68.5507925,14.8149434 C68.7548679,15.0975094 68.904,15.4245535 68.9981887,15.7960755 C69.0923774,16.1675975 69.1394717,16.5522013 69.1394717,16.9498868 C69.1394717,17.3266415 69.0949937,17.6981635 69.0060377,18.0644528 C68.9170818,18.4307421 68.7731824,18.7577862 68.5743396,19.0455849 C68.3754969,19.3333836 68.1190943,19.566239 67.8051321,19.7441509 C67.4911698,19.9220629 67.1091824,20.0110189 66.6591698,20.0110189 Z M80.8816604,21.1726792 C81.4991195,21.1726792 82.0407044,21.0627925 82.5064151,20.8430189 C82.9721258,20.6232453 83.3593459,20.3223648 83.6680755,19.9403774 C83.976805,19.5583899 84.207044,19.1109937 84.3587925,18.5981887 C84.5105409,18.0853836 84.5864151,17.5411824 84.5864151,16.9655849 C84.5864151,16.3899874 84.5079245,15.8457862 84.3509434,15.3329811 C84.1939623,14.8201761 83.9611069,14.3675472 83.6523774,13.9750943 C83.3436478,13.5826415 82.9564277,13.2712956 82.490717,13.0410566 C82.0250063,12.8108176 81.4781887,12.6956981 80.8502642,12.6956981 C80.2851321,12.6956981 79.7670943,12.7977358 79.2961509,13.0018113 C78.8252075,13.2058868 78.4798491,13.5329308 78.2600755,13.9829434 L78.2286792,13.9829434 L78.2286792,9.79154717 L76.8943396,9.79154717 L76.8943396,21 L78.2286792,21 L78.2286792,19.9168302 L78.2600755,19.9168302 C78.4065912,20.1575346 78.5871195,20.3589937 78.8016604,20.5212075 C79.0162013,20.6834214 79.2438239,20.8116226 79.4845283,20.9058113 C79.7252327,21 79.9685535,21.0680252 80.2144906,21.1098868 C80.4604277,21.1517484 80.6828176,21.1726792 80.8816604,21.1726792 Z M80.7403774,20.0110189 C80.2798994,20.0110189 79.8874465,19.9246792 79.5630189,19.752 C79.2385912,19.5793208 78.9743396,19.3516981 78.7702642,19.0691321 C78.5661887,18.786566 78.4170566,18.459522 78.3228679,18.088 C78.2286792,17.716478 78.1815849,17.3318742 78.1815849,16.9341887 C78.1815849,16.557434 78.2260629,16.1859119 78.3150189,15.8196226 C78.4039748,15.4533333 78.5478742,15.1262893 78.746717,14.8384906 C78.9455597,14.5506918 79.2019623,14.3178365 79.5159245,14.1399245 C79.8298868,13.9620126 80.2118742,13.8730566 80.6618868,13.8730566 C81.0909686,13.8730566 81.4651069,13.9567799 81.7843019,14.1242264 C82.1034969,14.291673 82.3651321,14.5166792 82.5692075,14.7992453 C82.773283,15.0818113 82.9250314,15.4036226 83.0244528,15.7646792 C83.1238742,16.1257358 83.1735849,16.4946415 83.1735849,16.8713962 C83.1735849,17.2690818 83.1317233,17.6563019 83.048,18.0330566 C82.9642767,18.4098113 82.8282264,18.7447044 82.6398491,19.0377358 C82.4514717,19.3307673 82.2029182,19.566239 81.8941887,19.7441509 C81.5854591,19.9220629 81.2008553,20.0110189 80.7403774,20.0110189 Z M86.9882264,24.2338113 C87.2917233,24.2338113 87.5533585,24.194566 87.7731321,24.1160755 C87.9929057,24.0375849 88.1943648,23.912 88.3775094,23.7393208 C88.5606541,23.5666415 88.7281006,23.3442516 88.8798491,23.0721509 C89.0315975,22.8000503 89.1859623,22.4651572 89.3429434,22.0674717 L92.8750189,12.8840755 L91.4621887,12.8840755 L89.1859623,19.5243774 L89.154566,19.5243774 L86.7841509,12.8840755 L85.2771321,12.8840755 L88.4952453,20.9529057 L87.9458113,22.3186415 C87.8202264,22.5593459 87.6737107,22.7424906 87.5062642,22.8680755 C87.3388176,22.9936604 87.119044,23.0564528 86.8469434,23.0564528 C86.7108931,23.0564528 86.5774591,23.035522 86.4466415,22.9936604 C86.3158239,22.9517987 86.1876226,22.9099371 86.0620377,22.8680755 L86.0620377,24.0925283 C86.2085535,24.1448553 86.3603019,24.1814843 86.517283,24.2024151 C86.6742642,24.2233459 86.8312453,24.2338113 86.9882264,24.2338113 Z"
                id="Poweredby" fill="#979797" fill-rule="nonzero"></path>
            </g>
          </g>
        </g>
      </svg>
    </footer>
  </section>
</body>
</html>`;
